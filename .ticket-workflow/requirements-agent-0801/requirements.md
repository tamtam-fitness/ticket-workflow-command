# 要件詳細化結果: 要件定義フェーズ特化エージェント開発

## WHY（目的・価値）

### なぜ実行するのか
- **要件定義の標準化・体系化**: 現在のチケットワークフローシステムでは、Requirements Analyzer（分析）とRequirements Elaborator（詳細化）は存在するが、**要件定義の初期段階における体系的なアプローチ**が不足している
- **開発者向けの実践的要件定義支援**: 研究結果から、開発者は要件定義の理論的知識が不足しがちで、BABOK/IIBA等の業界標準に基づく実践的なガイダンスが必要
- **要件品質の向上**: 2024年の研究によると、60-80%のソフトウェア開発コストは手戻り（rework）によるものであり、適切な要件定義により50-80%の欠陥を削減可能
- **既存エージェントとの機能補完**: 現在のRequirements Analyzerは既に定義された要件を分析するが、**要件を適切に定義する段階**での支援が必要

### 実行しない場合の影響
- **要件品質の不安定性**: 要件定義の体系的手法がないため、プロジェクトによって要件品質にばらつきが発生
- **手戻りコストの増大**: 不適切な要件定義により、後工程での大幅な修正・やり直しが発生
- **ステークホルダー要求の取りこぼし**: 体系的なステークホルダー分析手法がないため、重要な要求が見落とされるリスク
- **業界標準からの乖離**: BABOK/IIBA等の標準的な要件工学手法を活用できず、品質・効率の機会損失

### 期待される効果
- **要件定義品質の向上**: BABOK準拠の体系的手法により、網羅的で高品質な要件定義を実現
- **開発者のスキル向上**: 実践的な要件定義手法の習得により、開発者の要件分析能力を向上
- **プロジェクト成功率の改善**: 適切な要件定義により、プロジェクトの成功率向上とコスト削減を実現
- **ワークフロー完全性の達成**: 要件定義→分析→詳細化→分解→実行の完全なワークフローを構築

## CONSTRAINTS（制約条件）

### ドメイン制約（General Knowledge Injectorから取得）
- **BABOK/IIBA準拠**: 国際的な業務分析標準であるBABOK Guide v3の6つの知識エリアに準拠
- **現代的要件分類**: 2024-2025年の最新研究に基づく要件分類システム（機能・非機能・業務要件の詳細分類）
- **ステークホルダー分析標準**: 研究に基づく8つの主要ステークホルダー抽出技法を採用
- **品質保証準拠**: ISO/IEC 25010、2024年のソフトウェア品質標準に基づくレビューチェックリスト
- **AI活用限界**: 深層学習によるNFR分類等の最新技術は参考にとどめ、実用的手法を重視

### プロジェクト固有制約（Specified Knowledge Injectorから取得）
- **既存システム統合**: 現在のRequirements Analyzer、Requirements Elaboratorとの機能重複回避と連携設計
- **ワークフロー整合性**: Universal Analyzerが制御するワークフロー内での適切な位置づけ
- **Claude Codeエコシステム**: .claude/agents/配下での標準的なエージェント仕様に準拠
- **日本語対応**: 日本の開発現場に適応した日本語ベースの要件定義手法

### その他の制約
- **技術制約**: 
  - Markdownベースのドキュメント出力
  - ファイルシステム操作とWebSearchツールの活用
  - 既存のticket-workflowディレクトリ構造との整合性
- **時間制約**: 
  - 初期開発は段階的実装とし、コア機能から順次拡張
  - 既存システムへの影響を最小化する漸進的導入
- **リソース制約**: 
  - 開発者が主対象のため、専門的すぎる業務分析用語は避け実践的な表現を使用
  - 既存エージェントとの重複機能を避け、明確な役割分担を実現

## WHAT（詳細化された作業内容）

### 1. BABOK準拠要件分類システムの設計・実装
- **なぜこの作業が必要か**: 現在のシステムはWHY/WHAT/WHO/CONSTRAINTS/VOLUMEの分析フレームワークはあるが、BABOK標準に基づく業務要件・機能要件・非機能要件の体系的分類システムが不足している
- **具体的な作業内容**: 
  - BABOKの要件分類スキーマ（2.3 Requirements Classification Schema）を基に、3層分類システムを設計
  - 業務要件（Business Requirements）：組織目標・成功指標の定義手法
  - ステークホルダー要件（Stakeholder Requirements）：各関係者の価値期待の抽出手法  
  - ソリューション要件（Solution Requirements）：機能要件・非機能要件の詳細分類
  - 2024年研究の15種類のNFR分類を統合（Performance, Security, Reliability, Usability等）
- **成果物・完了条件**: 
  - requirements-classification-system.mdファイル作成
  - 各分類の定義・判定基準・実例を含むドキュメント
  - 既存のConstraints分析との整合性確認
- **見積工数**: 0.5人日（研究済み情報の構造化・文書化）

### 2. ステークホルダー要求抽出観点・技法の体系化
- **なぜこの作業が必要か**: 現在のWHO分析は担当者・承認者の特定に留まり、要求抽出の体系的手法が不足。研究により8つの主要抽出技法が確認されており、これを開発者向けに実践化する必要がある
- **具体的な作業内容**:
  - インタビュー技法（構造化・半構造化・非構造化）の実践ガイド作成
  - 調査・アンケート設計の観点・質問例の整備
  - 観察技法（アクティブ・パッシブ観察）の適用場面・手順の明確化
  - ワークショップ・フォーカスグループの運営手法の文書化
  - ステークホルダーマッピング手法（影響力・関心度マトリクス）の実装
  - 2024年研究の推薦システムベース要求抽出の参考情報整理
- **成果物・完了条件**:
  - stakeholder-elicitation-guide.mdファイル作成  
  - 各技法の適用条件・手順・テンプレート・チェックリストを含む
  - 開発プロジェクトでの実践例・ケーススタディを3-5例含める
- **見積工数**: 1.0人日（実践的手法の整理・テンプレート作成・事例研究）

### 3. 要求分析フェーズの定義・プロセス設計
- **なぜこの作業が必要か**: 現在のワークフローは分析→詳細化→分解→実行だが、BABOK準拠の要求分析プロセス（計画→抽出→分析→検証→管理）との整合性を取り、より体系的なアプローチを確立する必要がある
- **具体的な作業内容**:
  - BABOK 6知識エリアを参考に、要件定義専用のフェーズ分割設計
  - Phase 1: ビジネス分析計画（Business Analysis Planning）- スコープ・アプローチ決定
  - Phase 2: 要求抽出・協働（Elicitation and Collaboration）- ステークホルダーとの協働
  - Phase 3: 要求分析・設計定義（Requirements Analysis and Design Definition）- 要件の構造化・優先順位付け
  - Phase 4: 要求検証・承認（Requirements Validation and Approval）- レビュー・承認プロセス
  - 各フェーズの入力・出力・技法・成果物の明確化
  - 既存のRequirements Analyzer/Elaboratorとの接続点設計
- **成果物・完了条件**:
  - requirements-analysis-phases.mdファイル作成
  - 各フェーズの詳細手順・判定基準・テンプレートを含む
  - Universal Analyzerでの制御フロー統合案を含める
- **見積工数**: 0.8人日（BABOKプロセスの適応・既存システム統合設計）

### 4. 要件レビューチェックリストの作成・品質基準定義  
- **なぜこの作業が必要か**: 2024年の品質保証研究により、体系的なレビューチェックリストが品質向上に不可欠であることが確認されている。現在のシステムにはこの品質保証機能が不足している
- **具体的な作業内容**:
  - ISO/IEC 25010品質モデル準拠のチェックリスト設計
  - OpenRegulatory等の2024年テンプレートを参考にした実践的チェックリスト作成
  - 要件の完全性チェック（網羅性・一貫性・追跡可能性）
  - 要件の品質チェック（明確性・検証可能性・実現可能性）
  - ステークホルダー要求の妥当性チェック（優先順位・トレードオフ・リスク）
  - レビュー観点の階層化（必須項目・推奨項目・プロジェクト固有項目）
  - 自動チェック可能な項目と人的判断が必要な項目の分類
- **成果物・完了条件**:
  - requirements-review-checklist.mdファイル作成
  - チェック項目・判定基準・修正ガイダンスを含む包括的チェックリスト
  - Excel/CSV形式のチェックリストテンプレートも併せて提供
- **見積工数**: 0.7人日（品質基準の研究・チェックリスト設計・テンプレート作成）

### 5. エージェント仕様書・統合設計書の作成
- **なぜこの作業が必要か**: 上記4つの成果物を統合し、実際のClaude Codeエージェントとして実装するための技術仕様と、既存システムとの統合設計が必要
- **具体的な作業内容**:
  - エージェント仕様書（requirements-definition-specialist.md）の作成
  - 既存エージェントとの役割分担・インターフェース設計
  - ワークフロー内での実行タイミング・条件分岐の設計
  - 入力フォーマット・出力フォーマットの標準化
  - エラーハンドリング・例外処理の設計
  - ドメイン知識注入との連携仕様
  - Universal Analyzerでの制御方法の詳細設計
- **成果物・完了条件**:
  - requirements-definition-specialist.mdエージェント仕様書
  - 統合設計書（integration-design.md）
  - 実装・テスト計画書
- **見積工数**: 0.5人日（技術仕様作成・統合設計・実装計画策定）

### 6. 実装・テスト・文書化
- **なぜこの作業が必要か**: 設計した仕様を実際のエージェントとして実装し、既存システムとの統合動作を確認する必要がある
- **具体的な作業内容**:
  - エージェントファイルの実装（.claude/agents/requirements-definition-specialist.md）
  - 関連ドキュメントの配置・整理
  - 既存システムとの統合テスト
  - サンプルチケットでの動作確認
  - ドキュメント・README更新
  - 使用方法・実践ガイドの作成
- **成果物・完了条件**:
  - 実装済みエージェントファイル
  - 統合テスト結果・動作確認書
  - 更新されたドキュメント・使用ガイド
- **見積工数**: 1.0人日（実装・テスト・文書整備・動作確認）

## 📋 要件定義プロセス全体構成

### 新しいワークフロー位置づけ
```
チケット入力 
    ↓
🔄 Workflow Init (既存)
    ↓  
🔍 Universal Analyzer (既存)
    ↓
🎯 Requirements Definition Specialist (新規) ← この位置に配置
    ↓
📊 Requirements Analyzer (既存・改修)
    ↓
📝 Requirements Elaborator (既存)
    ↓
🔧 Task Decomposer (既存)
    ↓
⚡ Task Executor (既存)
```

### 差別化ポイント
- **Requirements Definition Specialist**: 要件の**定義**段階（初期構造化・分類・ステークホルダー分析）
- **Requirements Analyzer**: 定義された要件の**分析**段階（充足度評価・不足要素特定）  
- **Requirements Elaborator**: 分析結果の**詳細化**段階（調査・補完・具体化）

この体系的なアプローチにより、要件品質の大幅な向上と、開発者の要件定義スキル向上を実現する。